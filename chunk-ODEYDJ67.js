import{c as _,e as p,f as u,g as pe,w as me,x as fe}from"./chunk-NWUJ2N7A.js";import{$a as q,$d as de,A as M,Aa as E,Ba as V,Bc as Y,Ca as T,Cb as C,Da as D,Ea as R,Ec as Z,Fa as b,Fb as W,Fc as ee,Ga as l,Gb as I,Gc as te,Ha as a,Ia as k,Jb as $,Pa as w,Ra as h,Rb as z,Sa as v,U as d,V as m,Yd as se,Zd as ce,_a as x,_d as ue,ab as N,eb as c,fb as Q,ga as n,gb as F,gd as ie,hd as re,id as oe,ka as B,lc as G,mc as H,md as ne,oa as O,ob as j,od as ae,qa as P,qb as L,qc as J,ra as f,rb as U,ud as le,vc as K,wb as g,x as A,xb as S,zc as X}from"./chunk-GUZMYLNP.js";var y=class r extends _{provider=W.required();search=new X(null);searchSubscription;updateSubscription;selectionSubscription;constructor(){super(),this.bind([this.search]),this.searchSubscription=this.search.valueChanges.pipe(M(),A(700)).subscribe(e=>{typeof e=="string"&&this.provider().search(e)}),C(()=>this.search.patchValue(this.provider().selection())),C(()=>{let e=this.provider().searching();e&&this.readyOptions(),setTimeout(()=>{this.control.enabled&&this.pending.set(e)})})}get options(){return this.provider()}ngOnDestroy(){this.updateSubscription?.unsubscribe(),this.searchSubscription?.unsubscribe(),this.selectionSubscription?.unsubscribe(),super.ngOnDestroy()}readyOptions(){}searchOptions(){this.provider().search("")}optionSelected(e){this.select(this.provider().value(e))}bindValueEffect(){C(()=>{let e=this.provider();this.updateSubscription?.unsubscribe(),this.updateSubscription=this.control.valueChanges.pipe(M()).subscribe(t=>{e.select(t)}),setTimeout(()=>{e.select(this.control.value)})})}blur(){let e=this.search.value;if(console.log("BLURR",e),!e)this.select(null);else if(typeof e=="string"){let t=this.provider(),o=t()?.find(i=>t.display(i)===e);o?this.select(t.value(o)):(this.search.patchValue(null),this.updateValue(null))}}compareObjects(){return(e,t)=>this.compare(e,t)}displayItem(){return e=>e?this.provider().display(e):""}compare(e,t){return e!==null&&t!==null&&this.provider().equals(e,t)}static \u0275fac=function(t){return new(t||r)};static \u0275dir=P({type:r,inputs:{provider:[1,"provider"]},features:[f]})};var Se=()=>[];function Ce(r,e){if(r&1){let t=w();l(0,"mat-icon",6),h("click",function(i){return d(t),v().searchOptions(),m(i.preventDefault())}),c(1,"keyboard_arrow_down"),a()}}function _e(r,e){if(r&1&&(l(0,"mat-option",4),c(1),a()),r&2){let t=e.$implicit,o=v();b("value",t),n(),F(" ",o.provider().display(t)," ")}}function ye(r,e){r&1&&k(0,"mat-progress-bar",5)}function Me(r,e){if(r&1&&(l(0,"mat-error"),c(1),g(2,"transloco"),a()),r&2){let t=e.$implicit,o=v();n(),F(" ",S(2,1,o.label()+".error."+t)," ")}}var be=class r extends y{constructor(t){super();this.chdr=t;this.bindValueEffect()}autoComplete=I(p);autoTrigger=I(u);select(t){this.updateValue(t)}readyOptions(){this.refresh()}static \u0275fac=function(o){return new(o||r)(B($))};static \u0275cmp=O({type:r,selectors:[["editable-selectone"]],viewQuery:function(o,i){o&1&&(x(i.autoComplete,p,5),x(i.autoTrigger,u,5)),o&2&&q(2)},features:[L(_.getAccessorProvider(r)),f],decls:15,vars:14,consts:[["auto","matAutocomplete"],["matInput","",3,"blur","required","placeholder","matAutocomplete","formControl"],["matSuffix","",2,"display","flex"],[3,"optionSelected","displayWith"],[3,"value"],["mode","indeterminate"],[3,"click"]],template:function(o,i){if(o&1){let s=w();l(0,"mat-form-field")(1,"mat-label"),c(2),g(3,"transloco"),a(),l(4,"input",1),g(5,"transloco"),h("blur",function(){return d(s),m(i.blur())}),a(),l(6,"span",2),E(7,Ce,2,0,"mat-icon"),a(),l(8,"mat-autocomplete",3,0),h("optionSelected",function(ve){return d(s),m(i.optionSelected(ve.option.value))}),D(10,_e,2,2,"mat-option",4,T),a(),E(12,ye,1,0,"mat-progress-bar",5),D(13,Me,3,3,"mat-error",null,T),a()}if(o&2){let s=N(9);n(2),Q(S(3,9,i.label()+".label")),n(2),b("placeholder",j(S(5,11,i.label()+".placeholder")))("required",i.required())("matAutocomplete",s)("formControl",i.search),n(3),V(i.control.disabled?-1:7),n(),b("displayWith",i.displayItem()),n(2),R(i.options()||U(13,Se)),n(2),V(i.provider().searching()?12:-1),n(),R(i.errorMessages())}},dependencies:[ee,J,K,Z,ae,ne,ie,re,oe,pe,p,le,u,ce,se,de,ue,fe,me,te,Y,z,H,G],encapsulation:2})};export{be as a};
