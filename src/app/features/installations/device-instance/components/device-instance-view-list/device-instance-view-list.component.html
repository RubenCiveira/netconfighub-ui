<!-- @autogenerated -->
<device-instance-view-standar-actions #actions [hidden]="hidden()" [fixed]="fixed()">
  <div class="table-toolbar">
    @if (actions.hasMultiple() && actions.hasSelection()) {
      <div style="display: flex; flex-direction: row; padding: 10px 10px 0 10px; align-items: center">
        <ng-container *ngTemplateOutlet="actions.theSelectionTemplate() || null"></ng-container>
      </div>
    }
    @if (!actions.hasMultiple() || !actions.hasSelection()) {
      <div style="display: flex; flex-direction: row; padding: 10px 10px 0 10px; align-items: center">
        <ng-container *ngTemplateOutlet="actions.theToolbarTemplate() || null"></ng-container>
        <div style="flex: 1"></div>
        <button mat-raised-button (click)="panel.toggle()">
          @if (panel.expanded) {
            <mat-icon>keyboard_arrow_up</mat-icon>
          } @else {
            <mat-icon>filter_list</mat-icon>
          }
          {{ 'installations.device-instance.list.filter.button' | transloco }}
        </button>
        <button mat-icon-button (click)="reload()">
          <mat-icon>refresh</mat-icon>
        </button>
      </div>
    }
    <mat-expansion-panel #panel style="margin: 10px">
      <!-- Formulario de filtros -->
      <h2>{{ 'installations.device-instance.list.search.title' | transloco }}</h2>
      <device-instance-view-search #searchForm [formControl]="search" />
      <button mat-raised-button [disabled]="searchForm.form.invalid || !searchForm.form.dirty" (click)="makeSearch()">
        {{ 'installations.device-instance.list.search.button' | transloco }}
      </button>
    </mat-expansion-panel>
  </div>
  <div class="main">
    @if (!list.searching() && list()?.length == 0) {
      <div class="page">
        <h1>No content</h1>
      </div>
    } @else {
      <list-view
        [searching]="list.searching()"
        [data]="list()"
        (next)="next()"
        (prev)="prev()"
        (activate)="actions.defaultAction([$event])"
        [selectionMultiple]="!!actions.hasMultiple()"
        [selectionModel]="actions.selectionModel"
      >
        <list-view-row>
          <ng-template listViewRowTitle let-row="$implicit">
            {{ row.serialNumber }}
          </ng-template>
          <ng-template listViewRowAction let-row="$implicit">
            <ng-container
              *ngTemplateOutlet="actions.theContextTemplate() || null; context: { row: row, key: row.uid }"
            ></ng-container>
          </ng-template>
        </list-view-row>
        <list-view-table>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.project-device.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.project-device.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.projectDevice()?.name }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.model.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.model.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.model()?.name }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.serial-number.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.serial-number.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.serialNumber }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.model-photo.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.model-photo.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.modelPhoto }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.serial-number-photo.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.serial-number-photo.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.serialNumberPhoto }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.placement-photo.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.placement-photo.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.placementPhoto }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.installed-at.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.installed-at.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.installedAt }}
          </ng-template>
          <ng-template
            listViewColumn
            title="{{ 'installations.device-instance.list.column.installed-by.title' | transloco }}"
            tooltip="{{ 'installations.device-instance.list.column.installed-by.tooltip' | transloco }}"
            let-row="$implicit"
          >
            {{ row.installedBy }}
          </ng-template>
          <ng-template listViewColumn let-row="$implicit">
            <ng-container
              *ngTemplateOutlet="actions.theContextTemplate() || null; context: { row: row, key: row.uid }"
            ></ng-container>
          </ng-template>
        </list-view-table>
      </list-view>
    }
  </div>
</device-instance-view-standar-actions>
