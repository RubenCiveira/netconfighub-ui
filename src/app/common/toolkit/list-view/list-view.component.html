<!-- @autogenerated -->
@if (searching() && !data()) {
  @for (item of [].constructor(20); track $index) {
    <div class="ghost-element" [ngStyle]="{ height: itemHeight + 'px', overflow: 'hidden' }">
      <div class="ghost-line" style="width: 100%; height: 16px">{{ item }}</div>
    </div>
  }
} @else {
  @if (mobile()) {
    <ul class="material-list">
      <cdk-virtual-scroll-viewport #listScroll class="lcontent" [itemSize]="itemHeight">
        <li *cdkVirtualFor="let item of data()" class="material-list-item" (click)="selectAndActivate(item)">
          @let avatar = fallbackIcon( item );
          @if (row().icon()) {
            <div class="material-list-item-icon-container">
              <i class="material-list-item-icon">
                <ng-container *ngTemplateOutlet="row().icon()!.template; context: { $implicit: item }"></ng-container>
              </i>
            </div>
          } @else {
            <div class="material-list-item-icon-container" [ngStyle]="{color: avatar.fg, backgroundColor: avatar.bg}" 
                      (click)="selectAndActivate(item)"
                      style="display: flex; align-items: center; justify-content: center;">
                  <div [attr.aria-label]="avatar.ariaLabel">{{ avatar.initials}}</div>
            </div>
          }
          <div class="material-list-item-content">
            @if (row().title()) {
              <h3 class="material-list-item-title">
                <ng-container *ngTemplateOutlet="row().title()!.template; context: { $implicit: item }"></ng-container>
              </h3>
            }
            @if (row().subtitle()) {
              <p class="material-list-item-subtitle">
                <ng-container
                  *ngTemplateOutlet="row().subtitle()!.template; context: { $implicit: item }"
                ></ng-container>
              </p>
            }
            @if (row().text()) {
              <div class="material-list-item-subcontent">
                <ng-container *ngTemplateOutlet="row().text()!.template; context: { $implicit: item }"></ng-container>
              </div>
            }
          </div>
          @if (null !== row().icon() || null !== row().trailing()) {
            <div class="material-list-item-actions">
              @if (row().trailing()) {
                <ng-container
                  *ngTemplateOutlet="row().trailing()!.template; context: { $implicit: item }"
                ></ng-container>
              }
              @if (row().action()) {
                <ng-container *ngTemplateOutlet="row().action()!.template; context: { $implicit: item }"></ng-container>
              }
            </div>
          }
        </li>
      </cdk-virtual-scroll-viewport>
    </ul>
  } @else if(mode() == 'card') {
    <div class="card-grid">
      @for(item of data(); track $index) {
        <mat-card  appearance="outlined">
          <mat-card-header>
            @let avatar = fallbackIcon( item );
            @if ( row().icon() ) {
              <div mat-card-avatar>
                <ng-container *ngTemplateOutlet="row().icon()!.template; context: { $implicit: item }"></ng-container>
              </div>
            } @else {
                <div mat-card-avatar [ngStyle]="{color: avatar.fg, backgroundColor: avatar.bg}" 
                      (click)="selectAndActivate(item)"
                      style="display: flex; align-items: center; justify-content: center;">
                  <div [attr.aria-label]="avatar.ariaLabel">{{ avatar.initials}}</div>
                </div>
              }
             @if (row().title()) {
              <mat-card-title>
                <div (click)="selectAndActivate(item)">
                  <ng-container *ngTemplateOutlet="row().title()!.template; context: { $implicit: item }"></ng-container>
                </div>
              </mat-card-title>
             }
             @if (row().subtitle()) {
              <mat-card-subtitle>
                <ng-container *ngTemplateOutlet="row().subtitle()!.template; context: { $implicit: item }"></ng-container>
              </mat-card-subtitle>
             }
          </mat-card-header>
          <mat-card-content>
            @if (row().text()) {
                <ng-container *ngTemplateOutlet="row().text()!.template; context: { $implicit: item }"></ng-container>
            } @else {
              <p> .... {{item.uid}} {{ item.enabled}} </p>
            }
          </mat-card-content>
          <mat-card-actions>
              @if (row().action()) {
                <ng-container *ngTemplateOutlet="row().action()!.template; context: { $implicit: item }"></ng-container>
              }
          </mat-card-actions>
        </mat-card>
      }
    </div>
  } @else {
    <div class="material-table">
      <div class="thead">
        @if (!!this.selectionMultiple()) {
          <span class="th" style="width: 52px"></span>
        }
        @for (column of table().columns(); track $index) {
          @if (column.visible) {
            <span
              class="th"
              [ngClass]="{ small: !column.title() }"
              [ngStyle]="{ width: column.displayWidth + 'px', height: column.displayHeight + 'px' }"
            >
              {{ column.title() }}
            </span>
          }
        }
      </div>
      <div class="tbody">
        <cdk-virtual-scroll-viewport #tableScroll class="tcontent" [itemSize]="itemHeight">
          <div class="tr" *cdkVirtualFor="let item of data()">
            @if (selectionMultiple()) {
              <span style="width: 52px">
                <mat-checkbox (change)="check(item)" [checked]="isSelected(item)" (click)="$event.stopPropagation()" />
              </span>
            }
            @for (column of table().columns(); track $index) {
              @if (column.visible) {
                <span
                  class="td"
                  [ngClass]="{ small: !column.title() }"
                  [ngStyle]="{ width: column.displayWidth + 'px', height: column.displayHeight + 'px' }"
                  (click)="selectAndActivate(item)"
                >
                  <ng-container *ngTemplateOutlet="column.template; context: { $implicit: item }"></ng-container>
                </span>
              }
            }
          </div>
        </cdk-virtual-scroll-viewport>
      </div>
    </div>
  }
  @if (searching()) {
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  }
}
