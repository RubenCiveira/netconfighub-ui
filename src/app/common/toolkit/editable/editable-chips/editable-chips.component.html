<!-- @autogenerated -->
<mat-form-field>
  <mat-label>{{ label() + '.label' | transloco }}</mat-label>

  <mat-chip-grid [required]="required()" #chipList [disabled]="control.disabled">
    <mat-chip-row [removable]="!control.disabled" (removed)="removeChip(item)" *ngFor="let item of control.value">
      {{ render().display(item) }}
      @if (!control.disabled) {
        <mat-icon matChipRemove>cancel</mat-icon>
      }
    </mat-chip-row>

    <input
      #inputForChips
      matInput
      placeholder="{{ label() + '.placeholder' | transloco }}"
      [matChipInputFor]="chipList"
      [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
      [matChipInputAddOnBlur]="true"
      (matChipInputTokenEnd)="addChip($event.value)"
      [formControl]="search"
      [matAutocomplete]="autoForChips"
    />
    @if (provider().searching()) {
      <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    }
  </mat-chip-grid>
  @if (!control.disabled) {
    <mat-icon matSuffix (click)="searchOptions()">keyboard_arrow_down</mat-icon>
  }
  @for (error of errorMessages(); track $index) {
    <mat-error>
      {{ label() + '.error.' + error | transloco }}
    </mat-error>
  }
</mat-form-field>

<mat-autocomplete #autoForChips (optionSelected)="addSelectChip($event.option.value)">
  @for (item of provider()(); track $index) {
    <mat-option [value]="item">
      {{ provider().display(item) }}
    </mat-option>
  }
</mat-autocomplete>
